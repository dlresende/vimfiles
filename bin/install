#!/usr/bin/env bash

set -eu -o pipefail

main() {
  check_dependencies \
    nvim \

  echo "Installing tools required by vim-go..."
  nvim --headless +'GoUpdateBinaries' +'qall!'

  echo "Check if linters are available in PATH..."
  check_dependencies \
    checkstyle \
    pmd \
    javac \
    yamllint \
    gometalinter \

}

check_dependencies() {
  for bin in "$@"
  do
    if ! command -v "$bin" > /dev/null
    then
      echo "$bin required, but not found in PATH."
      exit 1
    fi
  done
}

main "$@"
