#!/usr/bin/env bash

set -eu -o pipefail

main() {
  check_dependencies \
    nvim \
    pip \
    cabal \

  echo "Installing tools required by vim-go..."
  nvim --headless +'GoUpdateBinaries' +'qall!'

  echo "Installing linters & fixers used by ale..."
  pip install --user yamllint
  cabal update && cabal install ShellCheck
}

check_dependencies() {
  for bin in "$@"
  do
    if ! command -v "$bin" > /dev/null
    then
      echo "$bin required, but not found in PATH."
      exit 1
    fi
  done
}

main
